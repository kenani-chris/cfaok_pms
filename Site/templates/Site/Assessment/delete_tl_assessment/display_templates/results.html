<!-- KPI Form -->

<div class="container-fluid">
    <div class="card">
        <div class="card-header">
            <h5>KPI results - <b>{{ kpi.kpi_title }}</b></h5>
        </div>


        <form method="post">
            {{ form.errors }}
            {{ form.kpi_id.as_hidden }}
            {{ form.kpi_pms.as_hidden }}
            {{ form.kpi_user.as_hidden }}
            {{ form.kpi_title.as_hidden }}
            {{ form.kpi_target.as_hidden }}
            {{ form.kpi_details.as_hidden }}
            {{ form.kpi_criteria.as_hidden }}
            {{ form.kpi_weight.as_hidden }}
            {{ form.kpi_units.as_hidden }}
            {{ form.kpi_type.as_hidden }}
            {{ form.kpi_submit_date.as_hidden }}
            {{ form.kpi_all_results_approve.as_hidden }}
            {{ form.kpi_april_score_approve.as_hidden }}
            {{ form.kpi_may_score_approve.as_hidden }}
            {{ form.kpi_june_score_approve.as_hidden }}
            {{ form.kpi_july_score_approve.as_hidden }}
            {{ form.kpi_august_score_approve.as_hidden }}
            {{ form.kpi_september_score_approve.as_hidden }}
            {{ form.kpi_october_score_approve.as_hidden }}
            {{ form.kpi_november_score_approve.as_hidden }}
            {{ form.kpi_december_score_approve.as_hidden }}
            {{ form.kpi_january_score_approve.as_hidden }}
            {{ form.kpi_february_score_approve.as_hidden }}
            {{ form.kpi_march_score_approve.as_hidden }}
            {% csrf_token %}
        <div class="card-body row">
            <div class="col-md-5">
                <table class="table table-hover table-bordered">
                    <thead>
                        <tr>
                            <th>#</th>
                            <th>Results</th>
                            <th>Approved</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Apr</td>
                            <td>
                            {% if reveal.April is True %}
                                {{ form.kpi_april_score }}
                            {% else %}
                                {{ form.kpi_april_score.as_hidden }}
                                {{ form.kpi_april_score.value }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_april_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>May</td>
                            <td>
                            {% if reveal.May is True %}
                                {{ form.kpi_may_score }}
                            {% else %}
                                {{ form.kpi_may_score.value }}
                                {{ form.kpi_may_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_may_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>June</td>
                            <td>
                            {% if reveal.June is True %}
                                {{ form.kpi_june_score }}
                            {% else %}
                                {{ form.kpi_june_score.value }}
                                {{ form.kpi_june_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_june_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>July</td>
                            <td>
                            {% if reveal.July is True %}
                                {{ form.kpi_july_score }}
                            {% else %}
                                {{ form.kpi_july_score.value }}
                                {{ form.kpi_july_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_july_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>August</td>
                            <td>
                            {% if reveal.August is True %}
                                {{ form.kpi_august_score }}
                            {% else %}
                                {{ form.kpi_august_score.value }}
                                {{ form.kpi_august_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_august_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>September</td>
                            <td>
                            {% if reveal.September is True %}
                                {{ form.kpi_september_score }}
                            {% else %}
                                {{ form.kpi_september_score.value }}
                                {{ form.kpi_september_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_september_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>October</td>
                            <td>
                            {% if reveal.October is True %}
                                {{ form.kpi_october_score }}
                            {% else %}
                                {{ form.kpi_october_score.value }}
                                {{ form.kpi_october_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_october_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>November</td>
                            <td>
                            {% if reveal.November is True %}
                                {{ form.kpi_november_score }}
                            {% else %}
                                {{ form.kpi_november_score.value }}
                                {{ form.kpi_november_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_november_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>December</td>
                            <td>
                            {% if reveal.December is True %}
                                {{ form.kpi_december_score }}
                            {% else %}
                                {{ form.kpi_december_score.value }}
                                {{ form.kpi_december_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_december_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>January</td>
                            <td>
                            {% if reveal.January is True %}
                                {{ form.kpi_january_score }}
                            {% else %}
                                {{ form.kpi_january_score.value }}
                                {{ form.kpi_january_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_january_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>February</td>
                            <td>
                            {% if reveal.February is True %}
                                {{ form.kpi_february_score }}
                            {% else %}
                                {{ form.kpi_february_score.value }}
                                {{ form.kpi_february_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_february_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>March</td>
                            <td>
                            {% if reveal.March is True %}
                                {{ form.kpi_march_score }}
                            {% else %}
                                {{ form.kpi_march_score.value }}
                                {{ form.kpi_march_score.as_hidden }}
                            {% endif %}
                            </td>
                            <td>
                                {% if form.kpi_march_score_approve.value is True %}
                                    <div class="text-center">
                                        <i class="fa fa-check-circle"></i>
                                    </div>
                                {% endif %}
                            </td>
                        </tr>
                    </tbody>
                </table>
                <button type="submit" class="btn btn-success float-right" style="margin: 10px">Save</button>
            </div>
            <div class="col-md-7">
                <div class="card card-info">
                  <div class="card-body">
                    <div class="chart">
                      <canvas id="lineChart" style="min-height: 250px; height: 300px; max-height: 300px; max-width: 100%;"></canvas>
                    </div>
                  </div>
                </div>
                 <table class="table table-bordered">
                      <tbody>
                        <tr>
                            <th>Units</th>
                            <td>{{ kpi.kpi_units }}</td>
                        </tr>
                        <tr>
                            <th>Target</th>
                            <td>{{ kpi.kpi_target }}</td>
                        </tr>
                        <tr>
                            <th>Weight</th>
                            <td>{{ kpi.kpi_weight }}</td>
                        </tr>
                        <tr>
                            <th>Description</th>
                            <td>{{ kpi.kpi_details }}</td>
                        </tr>
                        <tr>
                            <th>Criteria</th>
                            <td>{{ kpi.kpi_criteria }}</td>
                        </tr>
                        <tr>
                            <th>Function</th>
                            <td>{{ kpi.kpi_function }}</td>
                        </tr>
                        <tr>
                            <th>Type</th>
                            <td>{{ kpi.kpi_type }}</td>
                        </tr>
                        <tr>
                            <th>Criteria</th>
                            <td>{{ kpi.kpi_criteria }}</td>
                        </tr>
                      </tbody>
                  </table>
            </div>
        </div>
        <div class="card-footer">


        </div>
        </form>
    </div>
</div>
{% block jscripts %}
    <script>
  $(function () {

    var Data = {
      labels  : ['Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec', 'Jan', 'Feb', 'Mar'],
      datasets: [
        {
          label               : 'Results',
          backgroundColor     : 'rgba(60,141,188,0.9)',
          borderColor         : 'rgba(60,141,188,0.8)',
          pointRadius          : false,
          pointColor          : '#3b8bba',
          pointStrokeColor    : 'rgba(60,141,188,1)',
          pointHighlightFill  : '#fff',
          pointHighlightStroke: 'rgba(60,141,188,1)',
          data                : [28, 48, 40, 19, 86, 27, 90]
        },
        {
          label               : 'Target',
          backgroundColor     : 'rgba(210, 214, 222, 1)',
          borderColor         : 'rgba(210, 214, 222, 1)',
          pointRadius         : false,
          pointColor          : 'rgba(210, 214, 222, 1)',
          pointStrokeColor    : '#c1c7d1',
          pointHighlightFill  : '#fff',
          pointHighlightStroke: 'rgba(220,220,220,1)',
          data                : [{{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, {{ kpi.kpi_target }}, ]
        },
      ]
    }

    var Options = {
      maintainAspectRatio : false,
      responsive : true,
      legend: {
        display: false
      },
      scales: {
        xAxes: [{
          gridLines : {
            display : false,
          }
        }],
        yAxes: [{
          gridLines : {
            display : false,
          }
        }]
      }
    }



    //-------------
    //- LINE CHART -
    //--------------
    var lineChartCanvas = $('#lineChart').get(0).getContext('2d')
    var lineChartOptions = jQuery.extend(true, {}, Options)
    var lineChartData = jQuery.extend(true, {}, Data)
    lineChartData.datasets[0].fill = false;
    lineChartData.datasets[1].fill = false;
    lineChartOptions.datasetFill = false

    var lineChart = new Chart(lineChartCanvas, {
      type: 'line',
      data: lineChartData,
      options: lineChartOptions
    })




  })
</script>
{% endblock %}