{% extends 'Site/Reports/default.html' %}
    {% block breadcrumb %}
        <li class="breadcrumb-item active"><a href="{% url 'Site:Report' company_id %}">Report</a></li>
        <li class="breadcrumb-item active">Report - KPI Submissions</li>
    {% endblock %}
    {% block page_title %}Report - KPI Submissions{% endblock %}
    {% block content %}

        <div class="container-fluid">
            <div class="card card-danger">
                <div class="card-header">
                    <h3 class="card-title">Pie Chart</h3>
                </div>
                <div class="card-body row">
                    <div class="col-md-6">
                        <div class="chartjs-size-monitor">
                            <div class="chartjs-size-monitor-expand">
                                <div class=""></div>
                            </div>
                            <div class="chartjs-size-monitor-shrink">
                                <div class="">

                                </div>
                            </div>
                        </div>
                        <canvas id="piechart_submissions" style="min-height: 250px; height: 250px; max-height: 250px; max-width: 100%; display: block; width: 486px;" width="486" height="250" class="chartjs-render-monitor"></canvas>
                    </div>
                    <div class="col-md-6">
                        <table class="table table-bordered">
                            <thead>
                                <th>Required</th>
                                <th>Pending</th>
                                <th>Less</th>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>{{ staff_with_required }}</td>
                                    <td>{{ staff_with_pending }}</td>
                                    <td>{{ staff_with_less }}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>

            </div>


            <div class="card">
                <div class="card-header">
                    <h5>My Members</h5>
                </div>
                <button onclick="exportReportToExcel('exportTable1')">Export to excel</button>
                 <table class="table table-bordered table-hover" id="exportTable1">
                      <thead>
                          <tr>
                            <th>Staff</th>
                            <th>PF</th>
                            <th>Submitted</th>
                            <th>Pending</th>
                            <th>Approved</th>
                            <th>Required</th>
                            <th class="bg-colo1">Total</th>
                          </tr>
                          </thead>

                      <tbody>
                        {% for staff in my_members_submission %}
                        <tr>
                            <td>{{ staff.0 }}</td>
                            <td>{{ staff.0.staff_pf_number }}</td>
                            <td>{{ staff.1 }}</td>
                            <td>{{ staff.2 }}</td>
                            <td>{{ staff.3 }}</td>
                            <td>{{ staff.4 }}</td>
                            <td>{{ staff.5 }}</td>
                        </tr>
                        {% endfor %}
                      </tbody>
                 </table>
                <br>

            </div>
            {% if levels_down_submission|length > 0 %}
                <div class="card">
                    <div class="card-header">
                        <h5>Level down Members</h5>
                    </div>
                    <button onclick="exportReportToExcel('exportTable2')">Export to excel</button>
                     <table class="table table-bordered table-hover" id="exportTable2">
                          <thead>
                              <tr>
                                <th>Staff</th>
                                <th>PF</th>
                                <th>Submitted</th>
                                <th>Pending</th>
                                <th>Approved</th>
                                <th>Required</th>
                                <th class="bg-colo1">Total</th>
                              </tr>
                              </thead>

                          <tbody>
                            {% for staff in levels_down_submission %}
                            <tr>
                                <td>{{ staff.0 }}</td>
                                <td>{{ staff.0.staff_pf_number }}</td>
                                <td>{{ staff.1 }}</td>
                                <td>{{ staff.2 }}</td>
                                <td>{{ staff.3 }}</td>
                                <td>{{ staff.4 }}</td>
                                <td>{{ staff.5 }}</td>
                            </tr>
                            {% endfor %}
                          </tbody>
                     </table>
                    <br>

                </div>
            {% endif %}
        </div>


    {% endblock %}