{% extends "cfao_agri/default.html" %}
{% block mykpi %}{{ my_kpi_link }}{% endblock %}
{% block pagetitle %}{{ user_bu }}{% endblock %}

{% block content %}
    <div class="row">
    <div class="col-md-2">
        <div class="card card-primary card-outline">
          <div class="card-body box-profile">
            <h2 class="profile-username text-center">MY KPIs</h2>
            <hr>
            <br>

            <br>
            <ul class="list-group list-group-unbordered mb-3">
              <li class="list-group-item">
                <a href="{% url 'cfao_agri:BU_Dashboard' %}" class="btn btn-primary btn-block"><b>BU KPI Overview</b></a>
              </li>
            </ul>
          </div>
          <!-- /.card-body -->
        </div>
    </div>

  <div class="col-md-10">
    <div class="card">
      <div class="card-header">
        <h3 class="card-title">View KPI</h3>

      </div>
      <!-- /.card-header -->
      <div class="card-body">
        {% if bu_kpi %}

          <table id="example1" class="table table-bordered table-striped">
            <tbody>
              <tr>
                <th>
                  KPI
                </th>
                <td colspan="5">
                  {{ bu_kpi.bu_kpi_title }}
                </td>
              </tr>
              <tr>
                <th>
                  Description
                </th>
                <td colspan="5">
                  {{ bu_kpi.bu_kpi_details }}
                </td>
              </tr>
              <tr>
                <th>
                  Criteria
                </th>
                <td colspan="5">
                  {{ bu_kpi.bu_kpi_criteria }}
                </td>
              </tr>
              <tr class="bg-info">
                <th>
                  Function
                </th>
                <th>
                  Target
                </th>
                <th>
                  Calculation
                </th>
                <th>
                  Weight
                </th>
                <th>
                  Status
                </th>
                <th>
                  Submit Date
                </th>
              </tr>
              <tr>
                <td>
                  {{ bu_kpi.bu_kpi_function }}
                </td>
                <td>
                  {{ bu_kpi.bu_kpi_target }}
                </td>
                <td>
                  {{ bu_kpi.bu_kpi_type }}
                </td>
                <td>
                  {{ bu_kpi.bu_kpi_weight }}
                </td>
                <td>
                  {{ bu_kpi.bu_kpi_status }}
                </td>
                <td>
                  {{ bu_kpi.bu_kpi_submit_date }}
                </td>
              </tr>
              <tr class="bg-info">
                <th colspan="6">
                  Approvals
                </th>
              </tr>
              <tr>
                <th>
                  Approver
                </th>
                <td>
                  {{ bu_kpi.bu_kpi_team_leader_approval }}
                </td>
                <td>
                  {{ bu_kpi.bu_kpi_approval1_date }}
                </td>
              </tr>
            </tbody>
          </table>
          <table class="table table-bordered" id="example1">
            <thead>
                <tr>
                <th>Apr</th>
                <th>May</th>
                <th>Jun</th>
                <th>Jul</th>
                <th>Aug</th>
                <th>Sep</th>
                <th>Oct</th>
                <th>Nov</th>
                <th>Dec</th>
                <th>Jan</th>
                <th>Feb</th>
                <th>Mar</th>
              </tr>
            </thead>
            <tbody>
                <tr>
                    <td>
                    {{ bu_kpi.bu_kpi_april_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_may_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_june_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_july_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_august_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_september_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_october_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_november_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_december_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_january_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_february_score }}
                  </td>
                  <td>
                    {{ bu_kpi.bu_kpi_march_score }}
                  </td>
                </tr>
            </tbody>
          </table>
        {% else %}
          <div class="alert alert-warning">
            <h5><i class="icon fas fa-ban"></i> No KPIs found</h5>
            It Appears you've not submitted any KPIs. Or all of them have been declined
          </div>
        {% endif %}
      </div>

    <hr>
    <hr>

      <div class="card-body">
        <div style="overflow-x:scroll">
          {% if my_kpi %}
            <table id="example1" class="table table-bordered table-striped">
              <thead>
              <tr>
                <th>KPI</th>
                <th>Function</th>
                <th>Target</th>
                <th>Status</th>
                <th>Apr</th>
                <th>May</th>
                <th>Jun</th>
                <th>Jul</th>
                <th>Aug</th>
                <th>Sep</th>
                <th>Oct</th>
                <th>Nov</th>
                <th>Dec</th>
                <th>Jan</th>
                <th>Feb</th>
                <th>Mar</th>
              </tr>
              </thead>
              <tbody>
            {% for kpi in my_kpi %}
              {% if kpi.bu_kpi_status != "Rejected" %}
                <tr>
                  <td>
                      <a href="{% url 'cfao_agri:BU_dashboard-detail' kpi.bu_kpi_id %}">{{ kpi.bu_kpi_title }}</a>
                  </td>
                  <td>
                    {{ kpi.bu_kpi_function }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_target }}
                  </td>
                  {% if kpi.bu_kpi_status == "Pending" %}
                    <td class="bg-warning">
                      {{ kpi.bu_kpi_status }}
                    </td>
                  {% else %}
                    <td>
                      {{ kpi.bu_kpi_status }}
                    </td>
                  {% endif %}
                  <td>
                    {{ kpi.bu_kpi_april_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_may_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_june_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_july_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_august_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_september_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_october_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_november_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_december_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_january_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_february_score }}
                  </td>
                  <td>
                    {{ kpi.bu_kpi_march_score }}
                  </td>
                </tr>
              {% endif %}
            {% endfor %}
              </tbody>
              <tfoot>

              </tfoot>
            </table>
          {% else %}
            <div class="alert alert-warning">
              <h5><i class="icon fas fa-ban"></i> No KPIs found</h5>
              It Appears you've not submitted any KPIs. Or all of them have been declined
            </div>
          {% endif %}
        </div>
      </div>
      <!-- /.card-body -->
      <!-- /.card-body -->
    </div>
  </div>
    </div>

{% endblock %}